<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React 18 Migration | ModernX</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Modern React state management framework with concurrent features">
    
    <link rel="preload" href="/modernx/assets/css/0.styles.b76ebfdd.css" as="style"><link rel="preload" href="/modernx/assets/js/app.ef6082fa.js" as="script"><link rel="preload" href="/modernx/assets/js/2.3d5021cd.js" as="script"><link rel="preload" href="/modernx/assets/js/1.f4cd91dc.js" as="script"><link rel="preload" href="/modernx/assets/js/45.5cd4e158.js" as="script"><link rel="prefetch" href="/modernx/assets/js/10.a5603e21.js"><link rel="prefetch" href="/modernx/assets/js/11.1e3b401f.js"><link rel="prefetch" href="/modernx/assets/js/12.00d462b1.js"><link rel="prefetch" href="/modernx/assets/js/13.1dc05648.js"><link rel="prefetch" href="/modernx/assets/js/14.da9197ce.js"><link rel="prefetch" href="/modernx/assets/js/15.ef624351.js"><link rel="prefetch" href="/modernx/assets/js/16.6ebb19a3.js"><link rel="prefetch" href="/modernx/assets/js/17.ec17d98a.js"><link rel="prefetch" href="/modernx/assets/js/18.179ed69d.js"><link rel="prefetch" href="/modernx/assets/js/19.599ad32f.js"><link rel="prefetch" href="/modernx/assets/js/20.bdc16c97.js"><link rel="prefetch" href="/modernx/assets/js/21.3ff21a0e.js"><link rel="prefetch" href="/modernx/assets/js/22.704096b7.js"><link rel="prefetch" href="/modernx/assets/js/23.e99aba69.js"><link rel="prefetch" href="/modernx/assets/js/24.f25e74ef.js"><link rel="prefetch" href="/modernx/assets/js/25.d22e1551.js"><link rel="prefetch" href="/modernx/assets/js/26.75ab9594.js"><link rel="prefetch" href="/modernx/assets/js/27.b9a243be.js"><link rel="prefetch" href="/modernx/assets/js/28.e5b9080b.js"><link rel="prefetch" href="/modernx/assets/js/29.bb6238eb.js"><link rel="prefetch" href="/modernx/assets/js/3.adc08618.js"><link rel="prefetch" href="/modernx/assets/js/30.b6316fb0.js"><link rel="prefetch" href="/modernx/assets/js/31.cde95ef5.js"><link rel="prefetch" href="/modernx/assets/js/32.36cc3ac8.js"><link rel="prefetch" href="/modernx/assets/js/33.3bf20792.js"><link rel="prefetch" href="/modernx/assets/js/34.ce8c37aa.js"><link rel="prefetch" href="/modernx/assets/js/35.6014e276.js"><link rel="prefetch" href="/modernx/assets/js/36.9158755f.js"><link rel="prefetch" href="/modernx/assets/js/37.28c80af7.js"><link rel="prefetch" href="/modernx/assets/js/38.c81e078d.js"><link rel="prefetch" href="/modernx/assets/js/39.ca7d9004.js"><link rel="prefetch" href="/modernx/assets/js/4.d112ee6e.js"><link rel="prefetch" href="/modernx/assets/js/40.833ee22b.js"><link rel="prefetch" href="/modernx/assets/js/41.bc22d8be.js"><link rel="prefetch" href="/modernx/assets/js/42.db51c3a0.js"><link rel="prefetch" href="/modernx/assets/js/43.c710d362.js"><link rel="prefetch" href="/modernx/assets/js/44.bc5dd4c7.js"><link rel="prefetch" href="/modernx/assets/js/46.c06655ae.js"><link rel="prefetch" href="/modernx/assets/js/47.c5207658.js"><link rel="prefetch" href="/modernx/assets/js/48.176cf201.js"><link rel="prefetch" href="/modernx/assets/js/49.fd82b2c3.js"><link rel="prefetch" href="/modernx/assets/js/5.7141bfbf.js"><link rel="prefetch" href="/modernx/assets/js/50.7f368c0b.js"><link rel="prefetch" href="/modernx/assets/js/51.a4e28bff.js"><link rel="prefetch" href="/modernx/assets/js/52.66ec0bbf.js"><link rel="prefetch" href="/modernx/assets/js/53.2c96f083.js"><link rel="prefetch" href="/modernx/assets/js/6.00e7cf51.js"><link rel="prefetch" href="/modernx/assets/js/7.2210c270.js"><link rel="prefetch" href="/modernx/assets/js/vendors~docsearch.0644ee0a.js">
    <link rel="stylesheet" href="/modernx/assets/css/0.styles.b76ebfdd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/modernx/" class="home-link router-link-active"><!----> <span class="site-name">ModernX</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/modernx/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/modernx/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/modernx/api/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/modernx/packages/" class="nav-link">
  Packages
</a></div><div class="nav-item"><a href="/modernx/examples/" class="nav-link">
  Examples
</a></div><div class="nav-item"><a href="/modernx/migration/" class="nav-link router-link-active">
  Migration
</a></div><div class="nav-item"><a href="https://github.com/perlinson/modernx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/modernx/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/modernx/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/modernx/api/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/modernx/packages/" class="nav-link">
  Packages
</a></div><div class="nav-item"><a href="/modernx/examples/" class="nav-link">
  Examples
</a></div><div class="nav-item"><a href="/modernx/migration/" class="nav-link router-link-active">
  Migration
</a></div><div class="nav-item"><a href="https://github.com/perlinson/modernx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/modernx/migration/" aria-current="page" class="sidebar-link">Migration Guides</a></li><li><a href="/modernx/migration/from-dva.html" class="sidebar-link">Migration from DVA</a></li><li><a href="/modernx/migration/react-router-v6.html" class="sidebar-link">React Router v6 Migration</a></li><li><a href="/modernx/migration/react-18.html" aria-current="page" class="active sidebar-link">React 18 Migration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#key-react-18-features" class="sidebar-link">Key React 18 Features</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#migration-steps" class="sidebar-link">Migration Steps</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#_1-update-dependencies" class="sidebar-link">1. Update Dependencies</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#_2-update-reactdom" class="sidebar-link">2. Update ReactDOM</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#_3-modernx-with-react-18" class="sidebar-link">3. ModernX with React 18</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#_4-concurrent-features-with-modernx" class="sidebar-link">4. Concurrent Features with ModernX</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#_5-suspense-with-async-effects" class="sidebar-link">5. Suspense with Async Effects</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#_6-automatic-batching" class="sidebar-link">6. Automatic Batching</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#_7-concurrent-mode-best-practices" class="sidebar-link">7. Concurrent Mode Best Practices</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#_8-performance-monitoring" class="sidebar-link">8. Performance Monitoring</a></li></ul></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#migration-checklist" class="sidebar-link">Migration Checklist</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#common-issues" class="sidebar-link">Common Issues</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#_1-strict-mode-warnings" class="sidebar-link">1. Strict Mode Warnings</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#_2-concurrent-mode-compatibility" class="sidebar-link">2. Concurrent Mode Compatibility</a></li></ul></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#benefits-of-react-18-with-modernx" class="sidebar-link">Benefits of React 18 with ModernX</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#performance-tips" class="sidebar-link">Performance Tips</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#next-steps" class="sidebar-link">Next Steps</a></li><li class="sidebar-sub-header"><a href="/modernx/migration/react-18.html#need-help" class="sidebar-link">Need Help?</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react-18-migration"><a href="#react-18-migration" class="header-anchor">#</a> React 18 Migration</h1> <p>This guide helps you migrate your ModernX application to React 18 and take advantage of concurrent features.</p> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>React 18 introduces concurrent rendering, automatic batching, and new APIs that work seamlessly with ModernX.</p> <h2 id="key-react-18-features"><a href="#key-react-18-features" class="header-anchor">#</a> Key React 18 Features</h2> <table><thead><tr><th>Feature</th> <th>Description</th> <th>ModernX Integration</th></tr></thead> <tbody><tr><td>Concurrent Rendering</td> <td>Interruptible rendering for better UX</td> <td>Automatic with ModernX</td></tr> <tr><td>Automatic Batching</td> <td>Multiple state updates batched together</td> <td>Works with model updates</td></tr> <tr><td>useTransition</td> <td>Mark non-urgent updates</td> <td>Can wrap model dispatches</td></tr> <tr><td>useDeferredValue</td> <td>Defer non-critical UI updates</td> <td>Useful for large state</td></tr> <tr><td>Suspense Improvements</td> <td>Better loading states</td> <td>Works with async effects</td></tr></tbody></table> <h2 id="migration-steps"><a href="#migration-steps" class="header-anchor">#</a> Migration Steps</h2> <h3 id="_1-update-dependencies"><a href="#_1-update-dependencies" class="header-anchor">#</a> 1. Update Dependencies</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> react@18 react-dom@18
<span class="token function">npm</span> <span class="token function">install</span> --save-dev @types/react@18 @types/react-dom@18
</code></pre></div><h3 id="_2-update-reactdom"><a href="#_2-update-reactdom" class="header-anchor">#</a> 2. Update ReactDOM</h3> <h4 id="react-17"><a href="#react-17" class="header-anchor">#</a> React 17</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="react-18"><a href="#react-18" class="header-anchor">#</a> React 18</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-modernx-with-react-18"><a href="#_3-modernx-with-react-18" class="header-anchor">#</a> 3. ModernX with React 18</h3> <h4 id="basic-setup"><a href="#basic-setup" class="header-anchor">#</a> Basic Setup</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'modernx'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'modernx-core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>

<span class="token comment">// ModernX models work seamlessly with React 18</span>
<span class="token keyword">const</span> userModel <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">currentUser</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">reducers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">setCurrentUser</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>state<span class="token punctuation">,</span>
      <span class="token literal-property property">currentUser</span><span class="token operator">:</span> payload
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">setLoading</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>state<span class="token punctuation">,</span>
      <span class="token literal-property property">loading</span><span class="token operator">:</span> payload
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">effects</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter">credentials</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>credentials<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setCurrentUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">models</span><span class="token operator">:</span> <span class="token punctuation">[</span>userModel<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Provider app<span class="token operator">=</span><span class="token punctuation">{</span>app<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>MyApp <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-concurrent-features-with-modernx"><a href="#_4-concurrent-features-with-modernx" class="header-anchor">#</a> 4. Concurrent Features with ModernX</h3> <h4 id="usetransition-with-model-updates"><a href="#usetransition-with-model-updates" class="header-anchor">#</a> useTransition with Model Updates</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useModel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'modernx-core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">SearchComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>searchState<span class="token punctuation">,</span> searchDispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'search'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isPending<span class="token punctuation">,</span> startTransition<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useTransition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">const</span> <span class="token function-variable function">handleSearch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Mark search as non-urgent</span>
    <span class="token function">startTransition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">searchDispatch</span><span class="token punctuation">(</span><span class="token string">'performSearch'</span><span class="token punctuation">,</span> query<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input 
        type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleSearch</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span>
        placeholder<span class="token operator">=</span><span class="token string">&quot;Search...&quot;</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>isPending <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Searching<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>SearchResults results<span class="token operator">=</span><span class="token punctuation">{</span>searchState<span class="token punctuation">.</span>results<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> searchModel <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'search'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">results</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">reducers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">setQuery</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token literal-property property">query</span><span class="token operator">:</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">setResults</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token literal-property property">results</span><span class="token operator">:</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">setLoading</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token literal-property property">loading</span><span class="token operator">:</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">effects</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">performSearch</span><span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setResults</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="usedeferredvalue-for-large-state"><a href="#usedeferredvalue-for-large-state" class="header-anchor">#</a> useDeferredValue for Large State</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useModel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'modernx-core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDeferredValue<span class="token punctuation">,</span> useMemo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">LargeDataComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>dataState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'largeData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Defer expensive filtering</span>
  <span class="token keyword">const</span> deferredData <span class="token operator">=</span> <span class="token function">useDeferredValue</span><span class="token punctuation">(</span>dataState<span class="token punctuation">.</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">const</span> filteredItems <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> deferredData<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>deferredData<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Large Data List<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>VirtualizedList items<span class="token operator">=</span><span class="token punctuation">{</span>filteredItems<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> largeDataModel <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'largeData'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">reducers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">setItems</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token literal-property property">items</span><span class="token operator">:</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">setLoading</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> <span class="token literal-property property">loading</span><span class="token operator">:</span> payload <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">effects</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">fetchLargeDataset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setItems</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-suspense-with-async-effects"><a href="#_5-suspense-with-async-effects" class="header-anchor">#</a> 5. Suspense with Async Effects</h3> <h4 id="async-effects-with-suspense"><a href="#async-effects-with-suspense" class="header-anchor">#</a> Async Effects with Suspense</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useModel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'modernx-core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// Resource for async data</span>
<span class="token keyword">function</span> <span class="token function">createDataResource</span><span class="token punctuation">(</span><span class="token parameter">fetchFunction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> error <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  
  <span class="token keyword">const</span> <span class="token function-variable function">load</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> data<span class="token punctuation">;</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>promise<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> promise<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    promise <span class="token operator">=</span> <span class="token function">fetchFunction</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        data <span class="token operator">=</span> result<span class="token punctuation">;</span>
        promise <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        error <span class="token operator">=</span> err<span class="token punctuation">;</span>
        promise <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">throw</span> promise<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">{</span> load<span class="token punctuation">,</span> data<span class="token punctuation">,</span> error <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> userResource <span class="token operator">=</span> <span class="token function">createDataResource</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>fetchUser<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">UserProfile</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> userId <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>userState<span class="token punctuation">,</span> userDispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Load user data with Suspense</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> userResource<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">userDispatch</span><span class="token punctuation">(</span><span class="token string">'setCurrentUser'</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> userDispatch<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>email<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading user<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>UserProfile userId<span class="token operator">=</span><span class="token string">&quot;123&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-automatic-batching"><a href="#_6-automatic-batching" class="header-anchor">#</a> 6. Automatic Batching</h3> <p>ModernX automatically benefits from React 18's automatic batching:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>userState<span class="token punctuation">,</span> userDispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>postState<span class="token punctuation">,</span> postDispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'posts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// These updates will be automatically batched</span>
    <span class="token function">userDispatch</span><span class="token punctuation">(</span><span class="token string">'updateUser'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'John'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">postDispatch</span><span class="token punctuation">(</span><span class="token string">'addPost'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'New Post'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">userDispatch</span><span class="token punctuation">(</span><span class="token string">'setLoading'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>Update Multiple Models<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-concurrent-mode-best-practices"><a href="#_7-concurrent-mode-best-practices" class="header-anchor">#</a> 7. Concurrent Mode Best Practices</h3> <h4 id="priority-based-updates"><a href="#priority-based-updates" class="header-anchor">#</a> Priority-based Updates</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useModel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'modernx-core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTransition<span class="token punctuation">,</span> startTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">PriorityComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>uiState<span class="token punctuation">,</span> uiDispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'ui'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>dataState<span class="token punctuation">,</span> dataDispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// High priority - immediate UI feedback</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleUrgentUpdate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">uiDispatch</span><span class="token punctuation">(</span><span class="token string">'showLoading'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// This will render immediately</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Low priority - data processing</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleDataUpdate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">startTransition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">dataDispatch</span><span class="token punctuation">(</span><span class="token string">'processLargeDataset'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// This can be deferred</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleUrgentUpdate<span class="token punctuation">}</span><span class="token operator">&gt;</span>Urgent Update<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleDataUpdate<span class="token punctuation">}</span><span class="token operator">&gt;</span>Data Update<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="loading-states-with-transitions"><a href="#loading-states-with-transitions" class="header-anchor">#</a> Loading States with Transitions</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">LoadingAwareComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isPending<span class="token punctuation">,</span> startTransition<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useTransition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>dataState<span class="token punctuation">,</span> dataDispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">const</span> <span class="token function-variable function">handleAsyncOperation</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">startTransition</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">dataDispatch</span><span class="token punctuation">(</span><span class="token string">'fetchData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleAsyncOperation<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Fetch Data
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      
      <span class="token punctuation">{</span><span class="token comment">/* Show loading only for non-urgent updates */</span><span class="token punctuation">}</span>
      <span class="token punctuation">{</span>isPending <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;loading-overlay&quot;</span><span class="token operator">&gt;</span>
          Processing<span class="token operator">...</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
      
      <span class="token operator">&lt;</span>DataList data<span class="token operator">=</span><span class="token punctuation">{</span>dataState<span class="token punctuation">.</span>items<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-performance-monitoring"><a href="#_8-performance-monitoring" class="header-anchor">#</a> 8. Performance Monitoring</h3> <h4 id="react-devtools-integration"><a href="#react-devtools-integration" class="header-anchor">#</a> React DevTools Integration</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useModel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'modernx-core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useProfiler <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">ProfiledComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'myModel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token function">useProfiler</span><span class="token punctuation">(</span><span class="token string">'ProfiledComponent'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onRender</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> phase<span class="token punctuation">,</span> actualDuration</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>actualDuration <span class="token operator">&gt;</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Slow render detected in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>actualDuration<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Component content<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="migration-checklist"><a href="#migration-checklist" class="header-anchor">#</a> Migration Checklist</h2> <ul><li>[ ] Update React to v18</li> <li>[ ] Update ReactDOM to use createRoot</li> <li>[ ] Test concurrent features</li> <li>[ ] Implement useTransition where appropriate</li> <li>[ ] Add Suspense boundaries</li> <li>[ ] Monitor performance</li> <li>[ ] Update TypeScript types</li> <li>[ ] Test all functionality</li></ul> <h2 id="common-issues"><a href="#common-issues" class="header-anchor">#</a> Common Issues</h2> <h3 id="_1-strict-mode-warnings"><a href="#_1-strict-mode-warnings" class="header-anchor">#</a> 1. Strict Mode Warnings</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// React 18 Strict Mode runs effects twice in development</span>
<span class="token comment">// Ensure effects are idempotent</span>

React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> subscription <span class="token operator">=</span> api<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> subscription<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// This is fine - cleanup handles double runs</span>
</code></pre></div><h3 id="_2-concurrent-mode-compatibility"><a href="#_2-concurrent-mode-compatibility" class="header-anchor">#</a> 2. Concurrent Mode Compatibility</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Avoid side effects during rendering</span>
<span class="token keyword">function</span> <span class="token function">BadComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Don't do this - causes issues with concurrent rendering</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>needsUpdate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'updateData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Side effect during render</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Content<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Do this instead</span>
<span class="token keyword">function</span> <span class="token function">GoodComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>needsUpdate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'updateData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>state<span class="token punctuation">.</span>needsUpdate<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Content<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="benefits-of-react-18-with-modernx"><a href="#benefits-of-react-18-with-modernx" class="header-anchor">#</a> Benefits of React 18 with ModernX</h2> <ol><li><strong>Better Performance</strong>: Concurrent rendering improves UX</li> <li><strong>Automatic Batching</strong>: Multiple state updates optimized</li> <li><strong>Better Loading States</strong>: Improved Suspense support</li> <li><strong>Priority-based Updates</strong>: Control over rendering priority</li> <li><strong>Future Ready</strong>: Modern React features</li></ol> <h2 id="performance-tips"><a href="#performance-tips" class="header-anchor">#</a> Performance Tips</h2> <ol><li><strong>Use useTransition</strong> for non-urgent updates</li> <li><strong>Implement Suspense</strong> for better loading states</li> <li><strong>Monitor render performance</strong> with React DevTools</li> <li><strong>Optimize large datasets</strong> with useDeferredValue</li> <li><strong>Batch model updates</strong> when possible</li></ol> <h2 id="next-steps"><a href="#next-steps" class="header-anchor">#</a> Next Steps</h2> <ol><li>Update dependencies</li> <li>Update ReactDOM</li> <li>Test concurrent features</li> <li>Implement performance optimizations</li> <li>Monitor and optimize</li></ol> <h2 id="need-help"><a href="#need-help" class="header-anchor">#</a> Need Help?</h2> <ul><li>Check <a href="https://react.dev/blog/2022/03/29/react-v18" target="_blank" rel="noopener noreferrer">React 18 Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Review <a href="/modernx/examples/">ModernX Examples</a></li> <li>Open an issue on <a href="https://github.com/perlinson/modernx" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/19/2026, 9:15:47 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/modernx/migration/react-router-v6.html" class="prev">
        React Router v6 Migration
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/modernx/assets/js/app.ef6082fa.js" defer></script><script src="/modernx/assets/js/2.3d5021cd.js" defer></script><script src="/modernx/assets/js/1.f4cd91dc.js" defer></script><script src="/modernx/assets/js/45.5cd4e158.js" defer></script>
  </body>
</html>
