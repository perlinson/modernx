#!/usr/bin/env node

/**
 * modernx CLI å…¥å£æ–‡ä»¶
 * Modern React state management framework command line utility
 */

const { Command } = require('commander');
const packageJson = require('../package.json');
const create = require('../src/create');
const add = require('../src/add');
const dev = require('../src/dev');
const build = require('../src/build');

const program = new Command();

program
  .name('modernx')
  .description('Modern React state management framework CLI')
  .version(packageJson.version);

// åˆ›å»ºé¡¹ç›®å‘½ä»¤
program
  .command('create <projectName>')
  .description('Create a new modernx project')
  .option('-t, --template <template>', 'Project template (basic, full, react18)', 'basic')
  .option('-i, --install', 'Install dependencies after creation', true)
  .option('-g, --git', 'Initialize git repository', true)
  .action(create);

// æ·»åŠ åŠŸèƒ½å‘½ä»¤
program
  .command('add <feature>')
  .description('Add features to current project')
  .option('-f, --force', 'Force add feature even if exists')
  .action(add);

// å¼€å‘å‘½ä»¤
program
  .command('dev')
  .description('Start development server')
  .option('-p, --port <port>', 'Development server port', '3000')
  .option('--host <host>', 'Development server host', 'localhost')
  .action(dev);

// æ„å»ºå‘½ä»¤
program
  .command('build')
  .description('Build project for production')
  .option('-o, --output <output>', 'Output directory', 'dist')
  .action(build);

// å‡çº§å‘½ä»¤
program
  .command('upgrade')
  .description('Upgrade project to latest modernx')
  .action(async () => {
    console.log('ğŸš€ Upgrading project to modernx...');
    console.log('âœ… Project is already using modernx!');
  });

// æ¨¡æ¿å‘½ä»¤
program
  .command('template')
  .description('List available templates')
  .action(async () => {
    console.log('ğŸ“‹ Available templates:');
    console.log('  basic     - Basic modernx project');
    console.log('  full      - Full featured project with router, immer, loading');
    console.log('  react18   - React 18 concurrent features demo');
    console.log('  enterprise - Enterprise ready project with best practices');
  });

// å¸®åŠ©ä¿¡æ¯
program
  .command('help')
  .description('Show help information')
  .action(() => {
    program.outputHelp();
  });

// è§£æå‘½ä»¤è¡Œå‚æ•°
program.parse(process.argv);
